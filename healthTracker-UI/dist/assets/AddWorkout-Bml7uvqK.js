import{a as k,r as f,b as j,j as t,u as v,d as p,s as h,e as C,f as E,h as S,w as T,i as $,k as _,m as D,n as O,o as H,p as A,q as P}from"./index-0h3Qi8Xq.js";import{u as w}from"./useResizeContext-0p_tlcIy.js";import{u as z,B as L,E as R}from"./Exercise-Cw8sw53n.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],q=k("plus",V);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],F=k("save",J);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M10 2h4",key:"n1abiw"}],["path",{d:"M4.6 11a8 8 0 0 0 1.7 8.7 8 8 0 0 0 8.7 1.7",key:"10he05"}],["path",{d:"M7.4 7.4a8 8 0 0 1 10.3 1 8 8 0 0 1 .9 10.2",key:"15f7sh"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M12 12v-2",key:"fwoke6"}]],B=k("timer-off",K);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M10 2h4",key:"n1abiw"}],["path",{d:"M12 14v-4",key:"1evpnu"}],["path",{d:"M4 13a8 8 0 0 1 8-7 8 8 0 1 1-5.3 14L4 17.6",key:"1ts96g"}],["path",{d:"M9 17H4v5",key:"8t5av"}]],Q=k("timer-reset",G);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],X=k("timer",U);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Z=k("trash-2",Y),I=({className:i,onChange:n,value:o})=>{const[c,d]=f.useState(null),[r,u]=f.useState(o||0),[a,x]=f.useState(!1),m=j("justify-center items-center cursor border b-2 border-neutral-500 rounded-lg w-full max-w-xs flex",i);f.useEffect(()=>{let y;return a&&(c?y=setInterval(()=>{u(Date.now()-c)},1e3):d(Date.now()-r)),()=>{y&&clearInterval(y)}},[a,r,c]),f.useEffect(()=>{n?.(r)},[r]);const l=()=>{x(!0)},e=()=>{d(null),x(!1)},s=()=>{u(0),d(null)},g=y=>{const N=Math.floor(y/1e3),b=String(Math.floor(N/3600)).padStart(2,"0"),M=String(Math.floor(N%3600/60)).padStart(2,"0"),W=String(N%60).padStart(2,"0");return`${b}:${M}:${W}`};return t.jsxs("div",{className:m,children:[t.jsx("input",{type:"text",disabled:!0,value:g(r),className:"w-full rounded-lg p-2 flex-1"}),r>0&&!a?t.jsx(Q,{className:"flex-[0.4]",onClick:s}):"",a?t.jsx(B,{className:"flex-[0.4] pr-2",onClick:e}):t.jsx(X,{className:"flex-[0.4] pr-1",onClick:l})]})},ee=({className:i,itemId:n})=>{const o=v(),{width:c}=w(),d=p(l=>l.addWorkout.data?.exerciseSets.find(e=>e.id==n)?.name,h),r=p(l=>l.addWorkout.data?.exerciseSets.find(e=>e.id==n)?.sets.map(e=>e.id),h),u=()=>{o(E({exerciseSetId:n}))},a=l=>{const s={id:Date.now().toString(36)+Math.random().toString(36).slice(2),setNo:1,repsCount:1,weight:1,timeTaken:0,finished:!1};o(C({exerciseSetId:l,newModel:s}))};f.useEffect(()=>{r?.length==0&&a(n)},[]);const x=()=>{a(n)},m=j("flex flex-col text-2xl w-full border-2 border-neutral-600 rounded-lg",i);return t.jsxs("div",{className:m,children:[t.jsxs("div",{className:"flex w-full ",children:[t.jsx("div",{className:"flex-1 p-3",children:d}),t.jsxs("div",{className:"flex flex-1 justify-end p-2 gap-3 items-center text-lg px-4",children:[t.jsx("button",{className:"px-3 shadow-lg py-1 rounded-lg bg-blue-600",onClick:x,children:"Add Set"}),t.jsx(Z,{onClick:u,className:"bg-red-700 px-1 rounded-lg",height:35,width:35})]})]}),t.jsxs("div",{className:"flex px-5 py-3 text-lg gap-[2.2vw]",children:[t.jsx("p",{className:"flex-[0.2]",children:"Set"}),t.jsx("p",{className:"flex-1",children:"Reps"}),t.jsx("p",{className:"flex-1 ml-3",children:"Weight (lbs)"}),c>700?t.jsx("p",{className:"flex-1 ml-5",children:"âœ“"}):"",t.jsx("p",{className:"flex-1 ml-4",children:"Timer"})]}),r?.map((l,e)=>t.jsx(te,{setId:l,idx:e+1,exerciseSetId:n},l))]})},te=({setId:i,idx:n,exerciseSetId:o})=>{const{width:c}=w(),d=p(e=>e.addWorkout.data?.exerciseSets.find(s=>s.id==o)?.sets.find(s=>s.id==i)?.repsCount,h),r=p(e=>e.addWorkout.data?.exerciseSets.find(s=>s.id==o)?.sets.find(s=>s.id==i)?.weight,h),u=p(e=>e.addWorkout.data?.exerciseSets.find(s=>s.id==o)?.sets.find(s=>s.id==i)?.finished,h),a=v(),x="flex-1 min-w-0 p-2 border-1 border-neutral-500 rounded-lg",m=e=>{let s=e.currentTarget.value;const g=e.currentTarget.name;g=="finished"&&(s=parseInt(s)>0),a(S({val:s,name:g,exerciseSetId:o,setId:i}))},l=e=>{debugger;(e.key=="-"||e.key=="e"||e.key=="0")&&e.preventDefault()};return t.jsxs("div",{className:"flex p-5 text-lg gap-[1vw]",children:[t.jsx("div",{className:"flex-[0.2] content-center",children:n}),t.jsx("input",{className:x,value:d,min:1,onKeyDown:l,name:"repsCount",onChange:m,type:"number"}),t.jsx("input",{className:x,value:r,name:"weight",min:1,onKeyDown:l,onChange:m,type:"number"}),c>700?t.jsx("input",{className:x,value:u?1:0,min:1,onKeyDown:l,name:"finished",onChange:m,type:"text"}):"",t.jsx(se,{setId:i,exerciseSetId:o})]})},se=({setId:i,exerciseSetId:n})=>{const{width:o}=w(),c=p(u=>u.addWorkout.data.exerciseSets.find(a=>a.id===n)?.sets.find(a=>a.id==i)?.timeTaken,h),d=v(),r=u=>{d(S({val:u,name:"timeTaken",exerciseSetId:n,setId:i}))};return t.jsx(I,{className:`${o>700?"flex-1":"flex-[2.5]"}`,onChange:r,value:c})},ae=()=>{const i=v(),o=$()?.state?.workout;let c=JSON.parse(JSON.stringify(o||""));f.useEffect(()=>{c&&(c?.exerciseSets.forEach(a=>{a.name=a?.Exercise?.name||""}),i(_(c.exerciseSets)))},[]);const d=a=>{const x=a.target.value;i(O(x))},r=p(a=>a.addWorkout.data?.exerciseSets.map(x=>x.id),h),u=p(a=>a.addWorkout.data.name,h);return t.jsx("div",{className:"flex flex-col items-center py-[1rem]",children:t.jsxs("div",{className:"flex flex-col w-[65%] p-[1rem] gap-[1rem] home-resize-full",children:[t.jsx(ne,{}),t.jsx("input",{type:"email",id:"userEmail",name:"email",value:u,onChange:d,required:!0,placeholder:"Enter Workout name ...",className:"border-3 border-neutral-700 text-xl p-[1rem]"}),r?.map(a=>t.jsx(ee,{itemId:a}))]})})},ne=()=>{const[i,n]=z(),{width:o}=w(),[c,{isLoading:d}]=D(),r=v(),u=()=>{n(e=>!e)},a=(e,s)=>{const g=Date.now().toString(36)+Math.random().toString(36).slice(2);r(P({name:s,id:g,sets:[],exerciseId:e}))},x=async()=>{const e=m();if(!e.name||e.name.trim()===""){alert("Please enter a valid workout name");return}if(!e.exerciseSets||e.exerciseSets.length==0){alert("Please Add Workout");return}await c(e),r(A())},m=()=>{const e=H.getState().addWorkout.data,s=JSON.parse(JSON.stringify(e));return l(s),s};window.sanatizeWorkoutModel=m;const l=e=>{Object.keys(e).forEach(s=>{s=="id"&&delete e.id,typeof e[s]=="object"&&l(e[s])})};return t.jsxs("div",{className:`flex ${o<700?"flex-col gap-2":""}`,children:[t.jsx("div",{className:"flex-1 content-center text-2xl p-1",children:"Start Workout"}),t.jsxs("div",{className:`flex-1 ${o<700?"":"justify-end"} flex gap-[1rem]`,children:[t.jsxs("button",{className:`flex ${o<700?"flex-1":""} text-lg gap-2 rounded-xl px-3 items-center py-2 bg-gray-800 border-2 border-gray-700 hover:border-gray-600 rounded-lg`,onClick:u,children:[t.jsx(F,{}),"Add Exercise"]}),t.jsxs("button",{className:"flex text-lg gap-2 rounded-xl px-3 items-center py-2 bg-green-600 hover:bg-green-700 rounded-lg",onClick:d?()=>{}:x,children:[t.jsx(q,{}),d?"Loading":"Finish"]})]}),i&&t.jsx(L,{setOpen:n,children:t.jsx(R,{useInPopup:!0,setOpen:n,addNewModel:a})})]})},le=T(ae,{light:!1,screen:!0});export{le as AddWorkout};
