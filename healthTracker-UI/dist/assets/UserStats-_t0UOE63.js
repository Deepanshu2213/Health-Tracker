import{a as C,w as b,j as e,r as j,C as H,L as S,F as I,u as W,G as $,d as O,H as U,v as F,t as Q,I as J}from"./index-0h3Qi8Xq.js";import{C as q}from"./consistency-DZnlgBrc.js";import{u as M}from"./useResizeContext-0p_tlcIy.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],A=C("calendar",K);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],X=C("trending-up",V),Y=({type:t,error:a})=>{const[n,d]=j.useState({height:void 0,width:void 0}),{height:o,width:s}=n,c=j.useRef(null),x=()=>{if(t==="TableBased")return;const r=Math.floor(c?.current?.getBoundingClientRect().width||0),l=Math.floor(c?.current?.getBoundingClientRect().height||0);d({height:l,width:r})};j.useEffect(()=>{x();const r=()=>{x()};return window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}},[]);const v=({rows:r,columns:l,dateMapper:u})=>{const i=new Date;return i.setDate(1+i.getDate()-r*l),i.setHours(0,0,0,0),e.jsx("table",{className:"table-fixed w-full border-separate border-spacing-1",children:e.jsx("tbody",{children:Array.from({length:r}).map((f,m)=>{const y=new Date(i),p=e.jsx("tr",{className:"h-[1vh]",children:e.jsx(h,{row:r,columns:l,dateMapper:u,date:y},m+"row")},m);return i.setDate(1+i.getDate()),p})})})},h=({columns:r,date:l,row:u,dateMapper:i})=>{const f=W();return Array.from({length:r}).map((m,y)=>{const p=i[l.getTime()];let z=l.toJSON();const P=e.jsx("td",{className:`border-1 border-neutral-800 ${p?.length>0?"bg-green-600":"bg-neutral-800"} rounded-sm w-[2vh] relative tooltip_cmp`,onClick:()=>{f($(z))},children:e.jsx("span",{className:"tooltip text-wrap",children:`On ${l.toDateString()}  ${p?.length?`performed ${p?.length} workouts`:"not performed"}`})},y);return l.setDate(l.getDate()+u),P})},L=(r,l)=>{debugger;const u=o?o/l-10:0,i=s?s/r-10:0,f=[];for(let m=0;m<r;m++)f.push(T(l,u,i));return f},T=(r,l,u)=>{const i=Array.from({length:r}).map(()=>e.jsx("div",{className:"backdrop-blur-lg rounded-xl border border-white/20",style:{height:l,width:u}}));return e.jsx("div",{className:"flex flex-col gap-2",children:i})},N=7,k=50,E=new Date,w=new Date;w.setDate(1+w.getDate()-N*k);const{data:_,isLoading:B,isError:G}=H({startDate:w.toDateString(),endDate:E.toDateString()});if(B)return e.jsx(S,{screen:!1});let g={};return _?.data.getWorkout.forEach(r=>{g[r.createdAt||""]?g[r.createdAt||""].push(r):g[r.createdAt||""]=[r]}),G||a?e.jsx("div",{ref:c,className:"h-[22vh] p-2",children:e.jsx("div",{className:"flex gap-2 w-full h-full overflow-x-auto overflow-y-hidden text-center justify-center items-center",children:e.jsx(I,{})})}):e.jsx("div",{className:"flex flex-col w-full h-full",children:e.jsx("div",{ref:c,className:"h-[22vh] p-2 w-full",children:e.jsx("div",{className:"flex gap-2 h-full overflow-y-auto",children:t=="TableBased"?e.jsx(v,{rows:N,dateMapper:g,columns:k}):L(6,5)})})})},Z=()=>{const t=["bg-neutral-800","bg-green-900","bg-green-700","bg-green-500"];return e.jsxs("div",{className:"flex w-[12vh] p-1 flex gap-3 text-lg",children:[e.jsx("p",{children:"Less"}),e.jsx("table",{className:"table-fixed w-full border-separate border-spacing-1",children:e.jsx("tbody",{children:e.jsx("tr",{className:"h-[2.2vh]",children:Array.from({length:4}).map((a,n)=>e.jsx("td",{className:`rounded-sm w-[2vh] border-1 border-neutral-800 ${t[n]}`},n))})})}),e.jsx("p",{children:"More"})]})},D=b(Y,{overlay:!0}),ee=()=>{const[t,a]=j.useState();return e.jsxs("div",{className:"h-[50rem] flex flex-col p-[1rem]",children:[e.jsxs("div",{className:"grid grid-cols-[0.1fr_1fr] place-items-center w-fit py-5 text-3xl",children:[e.jsx(A,{className:"inline mx-2 text-purple-400",height:40,width:30}),e.jsx("h1",{className:"font-bold",children:"Workout Activity"})]}),e.jsxs("div",{className:"flex flex-col gap-[2rem] flex-1 overflow-hidden",children:[e.jsx(se,{setCurrentDay:a,currentDay:t}),e.jsx(re,{currentDay:t})]})]})},te=b(ee,{overlay:!0,className:"w-full"}),R=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],se=({setCurrentDay:t,currentDay:a})=>{const n=W(),d=(o,s)=>{o.preventDefault(),t(s),n($(""))};return e.jsx("div",{children:e.jsx("div",{className:"flex h-full gap-[2%] justify-evenly overflow-x-auto",children:R.map((o,s)=>e.jsx("button",{className:`border-2 border-neutral-600 w-[8rem] h-[3rem] m-1 px-2 py-1 rounded-lg shadow-lg scale-105 ${a==s?"bg-purple-700 font-semibold border-purple-600":""}`,onClick:c=>{d(c,s)},children:o},s))})})},re=({currentDay:t})=>{const a=O(h=>h.currentWorkout),{data:n}=U({day:t,customDay:a});debugger;const{width:d}=M(),o=F(),s=n?.data[0],c=s?.name;let x=-1;!t&&s&&s.createdAt?x=new Date(s.createdAt).getDay():(s||t||t===0)&&(x=t||0);const v=()=>{o("/addWorkout",{state:{workout:s}})};return e.jsxs("div",{className:"flex-1 h-full w-full bg-neutral-900",children:[e.jsxs("div",{className:`${d>700?"p-[1.5rem]":""} flex flex-col gap-[2rem]`,children:[e.jsxs("div",{className:"text-2xl grid grid-cols-[0.1fr_1fr] place-items-center w-fit",children:[e.jsx(A,{className:"inline mx-2 text-purple-400 "}),e.jsx("p",{children:`${x>=0?R[x]:"Last"} ${a?new Date(a).toLocaleDateString():"selected"} Workout`})]}),e.jsxs("div",{className:"mx-3 flex",children:[e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-lg bg-purple-700 rounded-full font-semibold p-3 text-neutral-200 w-fit text-center @max-[400px]:text-sm",children:c||"Back Day"})}),s&&s?.exerciseSets.length>=0&&e.jsx("button",{className:"text-lg bg-neutral-800 rounded-full font-semibold p-4 w-fit text-neutral-200 ml-1",type:"submit",onClick:v,children:"Copy Workout"})]})]}),e.jsx("div",{className:"h-[65%] overflow-y-auto",children:s?.exerciseSets.map(h=>e.jsx(ae,{exerciseSet:h},h.id))})]})},ae=({exerciseSet:t})=>{let a=1/0,n=-1/0,d=1/0,o=-1/0;t.sets.forEach(c=>{debugger;n=Math.max(n,c.repsCount),a=Math.min(a,c.repsCount),d=Math.min(d,c.weight),o=Math.max(o,c.weight)});const{width:s}=M();return e.jsx("div",{className:`${s>700?"p-[1.5rem] m-[2rem]":"p-[1rem] my-[1.5rem]"} flex flex-col text-xl rounded-lg border-2 border-neutral-700 text-neutral-300 bg-neutral-800 shadow-lg`,children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("p",{className:"flex-1 flex-start",children:t.Exercise?.name}),e.jsx("p",{className:`flex-1 text-end ml-3 text-red-400 bg-red font-bold ${s>700?"":"pr-[1rem]"}`,children:"Strength"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("p",{children:`Sets: ${t.sets.length}`}),e.jsx("p",{children:`Reps: ${a}-${n}`}),e.jsx("p",{children:`Weight: ${d}-${o}`})]})]})})},ie=()=>e.jsx("div",{className:"min-h-screen w-full flex flex-col items-center justify-center",children:e.jsxs("div",{className:"w-[40%] flex flex-col justify-center border-2 shadow-xl border-neutral-700 rounded-lg chart-media",children:[e.jsxs("div",{className:"w4-[40%] text-xl text-center py-5 flex gap-2 justify-center items-center",children:[e.jsx(X,{className:"text-purple-500",height:30,width:30}),e.jsx("p",{children:"Workout Frequency"})]}),e.jsx(q,{})]})}),le=()=>{const{data:t,isLoading:a}=Q(),n=t?.data.getStats[0];return a?e.jsx(S,{}):e.jsxs("div",{className:"w-full flex flex-col items-center",children:[e.jsx("div",{className:"flex text-3xl w-full justify-center my-4",children:e.jsxs("div",{className:"w-[66%] flex justify-between items-center",children:[e.jsx("h1",{className:"text-start",children:"Workout Statictics"}),e.jsx("button",{className:"text-2xl rounded-xl shadow-lg border-3 border-neutral-700 p-2 m-2",children:`Current streak: ${n?.current_streak||"NA"}`})]})}),e.jsxs("div",{className:"gap-[2rem] w-[66%] home-resize",children:[e.jsx(Z,{}),e.jsx(J,{fallback:e.jsx(D,{type:"TableBased",error:!0}),children:e.jsx(D,{type:"TableBased"})}),e.jsx("br",{}),e.jsx(te,{})]})]})},de=b(le,{light:!1,screen:!0});export{ie as UserStatsMain,le as UserStatsPage,de as default};
